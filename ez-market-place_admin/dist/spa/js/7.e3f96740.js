(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{2675:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.safePngBase64?i("q-img",{style:"width: "+e.size+"px; max-height: "+e.size+"px",attrs:{src:e.safePngBase64,contain:""}}):e._e()},l=[],n=(i("b7ef"),{name:"IconPicture",props:{pngBase64:{type:String,default:null},size:{type:Number,default:40}},computed:{safePngBase64(){let e=null;if(this.pngBase64&&this.pngBase64.length)try{const t=btoa(atob(this.pngBase64));e=`data:image/png;base64,${t}`}catch(t){}return e}}}),s=n,p=i("2877"),o=i("068f"),r=i("eebe"),d=i.n(r),c=Object(p["a"])(s,a,l,!1,null,null,null);t["a"]=c.exports;d()(c,"components",{QImg:o["a"]})},"5f14":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"q-gutter-sm q-pa-xl"},[i("q-card",{staticClass:"q-pa-md q-mx-none"},[i("q-card-section",{attrs:{horizontal:""}},[i("q-card-section",{staticClass:"col q-ma-none q-pa-none"},[i("q-card-section",{staticClass:"text-h4"},[e._v("\n              Pipeline Templates\n          ")]),i("q-card-section",[i("q-table",{attrs:{data:e.tableData,columns:e.columns,"row-key":"pipelineTemplateUid",dense:"","no-data-label":"No Pipeline Template to display.",filter:e.searchFilter,loading:e.dataLoading,"rows-per-page-label":"Pipeline Templates per page:",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[i("div",{staticClass:"full-width row wrap justify-between"},[i("div",{staticClass:"q-table__title"},[e._v("\n                    Pipeline Templates\n                  ")]),i("div",{staticClass:"row q-gutter-md"},[i("div",{staticClass:"col"},[i("q-btn",{staticStyle:{"min-width":"14rem"},attrs:{rounded:"",dense:"",color:"primary",icon:"add",label:"Add New Pipeline Template"},on:{click:function(t){return e.addNewPipelineTemplate()}}},[i("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e._v("\n                          Create a new Pipeline Template.\n                        ")])],1)],1)]),i("div",{staticClass:"row q-gutter-md"},[i("div",{staticStyle:{width:"300px"}},[i("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[e.searchFilter.length?i("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){e.searchFilter=""}}}):e._e(),i("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.searchFilter,callback:function(t){e.searchFilter=t},expression:"searchFilter"}})],1),i("q-btn",{attrs:{dense:"",outline:"",icon:"refresh",loading:e.dataLoading},on:{click:function(t){return e.loadPipelineTemplates()}}},[i("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e._v("\n                        Reload the list of Pipeline Templates.\n                      ")])],1)],1)])]},proxy:!0},{key:"body-cell-actions",fn:function(t){return[i("q-td",{attrs:{props:t}},[i("q-btn",{attrs:{flat:"",dense:"",icon:"edit"},on:{click:function(i){return e.doPromptForPipelineTemplateEdit(t.row)}}},[i("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e._v("\n                      "+e._s(e.$t("Edit Pipeline Template"))+"\n                    ")])],1),i("q-btn",{attrs:{icon:"content_paste_search",flat:"",dense:"",to:"PipelineTemplates/"+t.row.pipelineTemplateUid+"/Review"}},[i("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[e._v("\n                      "+e._s(e.$t("Review Pipeline Template"))+"\n                    ")])],1),i("q-btn",{attrs:{icon:"delete",flat:"",dense:"",color:"negative"}},[i("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[e._v("\n                      "+e._s(e.$t("Delete"))+"\n                    ")]),i("q-menu",{attrs:{anchor:"top right",self:"top left"}},[i("q-list",{staticStyle:{"min-width":"100px"}},[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(i){return e.updatePipelineTemplateStatusTo({pipelineTemplateFullDetails:t.row,toStatus:"To be deleted"})}}},[i("q-item-section",[e._v("Mark to be Deleted")])],1),i("q-item",{attrs:{clickable:""}},[i("q-item-section",[e._v("Delete Permanently")]),i("q-item-section",{attrs:{side:""}},[i("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1),i("q-menu",{attrs:{"content-class":"bg-negative text-white",anchor:"top end",self:"top start"}},[i("q-list",[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(i){return e.deletePipelineTemplateById(t.row.pipelineTemplateUid)}}},[i("q-item-section",[e._v("Confirm")])],1)],1)],1)],1)],1)],1)],1)],1)]}},{key:"body-cell-statusName",fn:function(t){return[i("q-td",{attrs:{props:t}},[i("div",["Visible"===t.value?i("q-icon",{attrs:{name:"visibility",color:"positive",size:"md"}}):"Hidden"===t.value?i("q-icon",{staticStyle:{opacity:".5"},attrs:{name:"visibility_off",size:"md"}}):"Pending review"===t.value?i("q-icon",{attrs:{name:"pending_actions",color:"primary",size:"md"}}):"Failed Review"===t.value?i("q-icon",{staticStyle:{opacity:".75"},attrs:{name:"assignment_late",color:"negative",size:"md"}}):"To be deleted"===t.value?i("q-icon",{staticStyle:{opacity:".5"},attrs:{name:"auto_delete",color:"negative",size:"md"}}):i("q-icon",{attrs:{name:"question_mark",color:"orange",size:"md"}}),i("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e._v("\n                      "+e._s(t.row.statusDescription)+"\n                    ")]),i("br"),e._v("\n                    "+e._s(t.value)+"\n                  ")],1)])]}},{key:"body-cell-publisherName",fn:function(t){return[i("q-td",{attrs:{props:t}},[i("Identicon",{attrs:{identity:t.value}}),i("div",[e._v("\n                    "+e._s(t.value)+"\n                  ")])],1)]}},{key:"body-cell-pipelineTemplateIconPicture",fn:function(e){return[i("q-td",{attrs:{props:e}},[i("IconPicture",{attrs:{pngBase64:e.value,size:70}})],1)]}},{key:"body-cell-pipelineTemplateCreatedOn",fn:function(t){return[i("q-td",{attrs:{props:t}},[i("div",[i("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[e._v("\n                      "+e._s(t.value)+"\n                    ")]),e._v("\n                    "+e._s(e.timeAgo(t.value))+"\n                  ")],1)])]}},{key:"body-cell-pipelineTemplateModifiedOn",fn:function(t){return[i("q-td",{attrs:{props:t}},[i("div",[i("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[e._v("\n                      "+e._s(t.value)+"\n                    ")]),e._v("\n                    "+e._s(e.timeAgo(t.value))+"\n                  ")],1)])]}}])})],1)],1)],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:e.showPipelineTemplateEdit,callback:function(t){e.showPipelineTemplateEdit=t},expression:"showPipelineTemplateEdit"}},[i("q-card",{staticStyle:{"min-width":"500px"}},[i("q-card-section",[null!=e.editingPipelineTemplateUid?i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("Edit Pipeline Template")))]):i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("New Pipeline Template")))])]),i("q-card-section",{staticClass:"q-pt-none"},[i("q-select",{attrs:{dense:"",options:e.statusOptions,label:"Status","emit-value":"","map-options":"",rules:[function(t){return e.goodStatusOptions.includes(t)||e.$t("Status should only be 'Visible', 'Pending review', 'Failed Review', 'Hidden' or 'To be Deleted'")}]},model:{value:e.editingStatusId,callback:function(t){e.editingStatusId=t},expression:"editingStatusId"}})],1),i("q-card-section",{staticClass:"q-pt-none"},[i("q-select",{attrs:{dense:"","emit-value":"","map-options":"",options:e.publishersOptions,label:"Publisher","stack-label":"","popup-content-class":e.darkMode?"bg-grey-9":void 0,"use-input":"","input-debounce":"0"},on:{filter:e.filterPublishersOptions},scopedSlots:e._u([{key:"option",fn:function(t){return[t.opt.label&&"<hr>"!==t.opt.label?i("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[i("q-item-section",[t.opt.value&&t.opt.value.length>0?i("q-item-label",[i("div",{staticClass:"row justify-between"},[i("div",{staticClass:"text-bold"},[e._v(e._s(t.opt.label))])])]):i("q-item-label",{staticClass:"text-bold"},[e._v(e._s(t.opt.label))]),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.value))])],1)],1):e._e(),t.opt.separator?i("q-separator",{attrs:{inset:"",spaced:t.opt.label&&"<hr>"===t.opt.label}}):e._e()]}},{key:"no-option",fn:function(){return[i("q-item",[i("q-item-section",{staticClass:"text-grey"},[e._v("\n                No results\n              ")])],1)]},proxy:!0}]),model:{value:e.editingPublisherUid,callback:function(t){e.editingPublisherUid=t},expression:"editingPublisherUid"}})],1),i("q-card-section",{staticClass:"q-pt-none"},[i("q-input",{attrs:{dense:"",label:"Name",autofocus:"",rules:[function(t){return!!t||e.$t("Name cannot be empty")}]},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.showPipelineTemplateEdit=!1}},model:{value:e.editingName,callback:function(t){e.editingName=t},expression:"editingName"}})],1),i("q-separator"),i("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.$t("Cancel")}}),null!=e.editingPipelineTemplateUid?i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.$t("Update Pipeline Template"),disabled:!e.editingName||!e.editingName.length},on:{click:function(t){return e.addNewOrUpdatePipelineTemplate()}}}):i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.$t("Add new Pipeline Template"),disabled:!e.editingName||!e.editingName.length},on:{click:function(t){return e.addNewOrUpdatePipelineTemplate()}}})],1)],1)],1)],1)},l=[],n=(i("e01a"),i("ddb0"),i("2f62")),s=i("a87d"),p=i("da35"),o=i("2675"),r=i("7c4c"),d=i("541d");r["a"].addDefaultLocale(d);var c={name:"PageAdminPipelineTemplates",mixins:[s["a"]],components:{Identicon:p["a"],IconPicture:o["a"]},data(){return{searchFilter:"",columns:[{name:"actions",align:"center",label:"Actions",field:"actions",sortable:!1},{name:"statusName",align:"center",label:"Status",field:"statusName",sortable:!0},{name:"publisherName",align:"center",label:"Publisher",field:"publisherName",sortable:!0},{name:"pipelineTemplateUid",align:"center",label:"UID",field:"pipelineTemplateUid",sortable:!0},{name:"pipelineTemplateIconPicture",align:"center",label:"Icon / Logo",field:"pipelineTemplateIconPicture",sortable:!1},{name:"pipelineTemplateName",align:"center",label:"Pipeline Template Name",field:"pipelineTemplateName",sortable:!0,classes:"",style:"white-space: pre-line;"},{name:"pipelineTemplateStats",align:"center",label:"Stats",field:"pipelineTemplateStats",sortable:!1},{name:"pipelineTemplateCreatedOn",align:"center",label:"Created",field:"pipelineTemplateCreatedOn",sortable:!0},{name:"pipelineTemplateModifiedOn",align:"center",label:"Modified",field:"pipelineTemplateModifiedOn",sortable:!0}],pagination:{sortBy:"pipelineTemplateCreatedOn",descending:!0,rowsPerPage:10},statusesLoading:!1,pipelineTemplatesLoading:!1,showPipelineTemplateEdit:!1,editingPipelineTemplateUid:null,editingCreatedOn:null,editingModifiedOn:null,editingPublisherUid:null,editingPublisherName:null,editingStatusId:null,editingStatusName:null,editingStatusDescription:null,editingName:null,editingStats:null,goodStatusOptions:[0,1,2,3,4],publishersOptions:[],publishersLoading:!1}},computed:{...Object(n["d"])("mainStore",["ezMarketPipelineTemplates","ezMarketStatuses","ezMarketPublishers"]),tableData(){return this.ezMarketPipelineTemplates},dataLoading(){return this.statusesLoading||this.publishersLoading||this.pipelineTemplatesLoading},statusOptions(){const e=[];return this.ezMarketStatuses&&Array.isArray(this.ezMarketStatuses)&&this.ezMarketStatuses.length&&this.ezMarketStatuses.forEach((t=>{e.push({value:t.id,label:t.name,description:t.description})})),e},publishersOptionsRaw(){const e=[];return this.ezMarketPublishers&&Array.isArray(this.ezMarketPublishers)&&this.ezMarketPublishers.length&&this.ezMarketPublishers.forEach((t=>{e.push({value:t.publisherUid,label:t.displayName})})),e}},methods:{...Object(n["b"])("mainStore",["getStatuses","getPublishers","getPipelineTemplates","updatePipelineTemplate","deletePipelineTemplate"]),loadStatuses(){this.getStatuses({loadingVariableName:"statusesLoading",caller:this})},loadPublishers(){this.getPublishers({loadingVariableName:"publishersLoading",caller:this,onSuccessCallBack:this.publishersLoaded})},publishersLoaded(){this.publishersOptions=this.publishersOptionsRaw},filterPublishersOptions(e,t,i){const a=[...this.publishersOptionsRaw];t(""===e?()=>{this.publishersOptions=a}:()=>{const t=e.toLowerCase();this.publishersOptions=a.filter((e=>(e.label+e.value).toLowerCase().indexOf(t)>-1))})},loadPipelineTemplates(){this.getPipelineTemplates({loadingVariableName:"pipelineTemplatesLoading",caller:this})},doPromptForPipelineTemplateEdit(e){e&&(this.showPipelineTemplateEdit=!0,this.editingPipelineTemplateUid=e.pipelineTemplateUid||null,this.editingCreatedOn=e.pipelineTemplateCreatedOn||null,this.editingModifiedOn=e.pipelineTemplateModifiedOn||null,this.editingPublisherUid=e.publisherUid||null,this.editingPublisherName=e.publisherName||null,this.editingStatusId=e.statusId,this.editingStatusName=e.statusName||null,this.editingStatusDescription=e.statusDescription||null,this.editingName=e.pipelineTemplateName||null,this.editingStats=e.pipelineTemplateStats||null)},addNewPipelineTemplate(){this.doPromptForPipelineTemplateEdit({pipelineTemplateUid:null,pipelineTemplateCreatedOn:null,pipelineTemplateModifiedOn:null,publisherUid:null,publisherName:null,statusId:1,statusName:"Pending review",statusDescription:"The item is to be reviewed",pipelineTemplateName:"",pipelineTemplateStats:{}})},updatePipelineTemplateStatusTo(e){let t;e&&e.toStatus&&e.toStatus.length&&e.pipelineTemplateFullDetails&&e.pipelineTemplateFullDetails.pipelineTemplateUid&&e.pipelineTemplateFullDetails.pipelineTemplateUid.length&&("To be deleted"===e.toStatus&&(t=4),this.updatePipelineTemplate({pipelineTemplateUid:e.pipelineTemplateFullDetails.pipelineTemplateUid,statusId:t,name:e.pipelineTemplateFullDetails.pipelineTemplateName,loadingVariableName:"pipelineTemplatesLoading",caller:this,onSuccessCallBack:this.loadPipelineTemplates,onErrorCallBack:this.addNewOrUpdatePipelineTemplateFailure,debug:!0}))},deletePipelineTemplateById(e){this.deletePipelineTemplate({pipelineTemplateUid:e,loadingVariableName:"pipelineTemplatesLoading",caller:this,onSuccessCallBack:this.loadPipelineTemplates,onErrorCallBack:this.addNewOrUpdatePipelineTemplateFailure})},addNewOrUpdatePipelineTemplate(){this.updatePipelineTemplate({pipelineTemplateUid:this.editingPipelineTemplateUid,publisherUid:this.editingPublisherUid,statusId:this.editingStatusId,name:this.editingName,pipelineTemplateStats:this.editingStats,loadingVariableName:"pipelineTemplatesLoading",caller:this,onSuccessCallBack:this.loadPipelineTemplates,onErrorCallBack:this.addNewOrUpdatePipelineTemplateFailure,debug:!0})},addNewOrUpdatePipelineTemplateFailure(e){this.$root.$emit("addAndShowErrorToErrorPanel",e),this.loadPipelineTemplates()},timeAgo(e){let t="Some time ago";try{const i=new r["a"]("en-US");t=i.format(new Date(e))}catch(i){}return t}},mounted(){this.publishersOptions=this.publishersOptionsRaw,this.loadPipelineTemplates(),this.loadStatuses(),this.loadPublishers()}},u=c,m=i("2877"),h=i("9989"),b=i("f09f"),g=i("a370"),T=i("eaac"),f=i("9c40"),P=i("05c0"),v=i("27f9"),q=i("0016"),y=i("db86"),w=i("4e73"),S=i("1c1c"),_=i("66e5"),k=i("4074"),N=i("24e8"),O=i("ddd8"),C=i("0170"),U=i("eb85"),z=i("4b7e"),x=i("7f67"),I=i("eebe"),M=i.n(I),E=Object(m["a"])(u,a,l,!1,null,null,null);t["default"]=E.exports;M()(E,"components",{QPage:h["a"],QCard:b["a"],QCardSection:g["a"],QTable:T["a"],QBtn:f["a"],QTooltip:P["a"],QInput:v["a"],QIcon:q["a"],QTd:y["a"],QMenu:w["a"],QList:S["a"],QItem:_["a"],QItemSection:k["a"],QDialog:N["a"],QSelect:O["a"],QItemLabel:C["a"],QSeparator:U["a"],QCardActions:z["a"]}),M()(E,"directives",{ClosePopup:x["a"]})},a87d:function(e,t,i){"use strict";t["a"]={computed:{darkMode:{get(){return this.$q.dark.isActive},set(e){this.$q.dark.set(e),localStorage.setItem("settings.darkMode",e)}}}}},da35:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{domProps:{innerHTML:e._s(e.identiconAsSvg)}})},l=[],n=i("cd07"),s={name:"Identicon",props:{identity:{type:String,default:null}},computed:{identiconAsSvg(){return Object(n["a"])(this.identity,50)}}},p=s,o=i("2877"),r=Object(o["a"])(p,a,l,!1,null,null,null);t["a"]=r.exports}}]);