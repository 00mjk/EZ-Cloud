(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"825d":function(e,t,a){"use strict";a("8839")},8839:function(e,t,a){},aeab:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"flex flex-center"},[a("form",[a("q-card",{class:e.shakyClass?"computerSaysNo":"",staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("Sign in to OC Admin")))])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{attrs:{dense:"",autofocus:"",hint:e.$t("Username"),rules:[function(t){return!!t||e.$t("Username is required")}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkCredentials()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{attrs:{dense:"",type:"password",hint:e.$t("Password")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkCredentials()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("q-card-section",{staticClass:"q-py-none"},[a("dir",{staticClass:"q-ma-none q-px-sm text-bold text-negative text-center fadeOut"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.lastAttemptFailed,expression:"lastAttemptFailed"}]},[e._v(e._s(e.$t("Authentication failed.")))]),e._v("Â \n        ")])],1),a("q-card-actions",{attrs:{align:"between"}},[a("q-toggle",{staticClass:"q-my-sm",attrs:{"checked-icon":"dark_mode","unchecked-icon":"light_mode",color:"grey","keep-color":""},model:{value:e.darkMode,callback:function(t){e.darkMode=t},expression:"darkMode"}},[a("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e._v("\n            "+e._s(e.$t("Switch between Light and Dark mode"))+"\n          ")])],1),a("q-btn",{attrs:{flat:"",icon:"translate"}},[a("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e._v("\n            "+e._s(e.$t("Change language"))+"\n          ")]),a("q-menu",{attrs:{"auto-close":"",anchor:"bottom middle",self:"top middle"}},[a("q-list",{staticStyle:{"min-width":"10em"}},e._l(e.languageList,(function(t){return a("q-item",{key:t.value,staticClass:"text-center",attrs:{clickable:!t.selected},on:{click:function(a){return e.selectLanguage(t.value)}}},[a("q-item-section",{class:t.selected?"text-primary":""},[a("div",[e._v(e._s(t.nativeLabel))])])],1)})),1)],1)],1),a("q-btn",{staticClass:"q-my-sm",attrs:{flat:"",label:e.$t("Login"),color:"primary",loading:e.waitingOnServer,disable:!e.canWeLogin},on:{click:function(t){return e.checkCredentials()}}})],1)],1)],1),a("q-page-sticky",{attrs:{position:"bottom",offset:[18,18]}},[a("q-fab",{attrs:{icon:"keyboard_arrow_up",direction:"up",square:"",color:"blue-grey-7"},on:{click:function(t){e.morphGroupModel="full"}},scopedSlots:e._u([{key:"label",fn:function(t){var s=t.opened;return[a("div",{class:{"example-fab-animate--hover":!0!==s}},[e.statusWarnings&&!e.statusProblems?a("q-badge",{attrs:{color:"warning","text-color":"black",floating:""}},[e._v(e._s(e.statusWarnings))]):e._e(),e.statusProblems?a("q-badge",{attrs:{color:"negative",floating:""}},[e._v(e._s(e.statusProblems))]):e._e(),e._v("\n          "+e._s(!0!==s?e.$t("Statuses"):e.$t("Close"))+"\n          "),e.loadingPersistenceLayerAvailability||e.delayUntilCheck>0?a("q-linear-progress",{attrs:{indeterminate:e.loadingPersistenceLayerAvailability&&e.delayUntilCheck<0,value:e.delayUntilCheck,color:"white",size:"1px"}}):e._e()],1)]}}])},[a("q-card",{staticStyle:{"min-width":"40rem"},attrs:{dense:""}},[a("q-card-section",{attrs:{horizontal:""}},[a("q-card-section",{staticClass:"column items-center no-wrap q-gutter-y-sm justify-center q-px-lg"},[a("q-icon",{attrs:{name:"traffic",size:"xl"}}),a("div",{staticClass:"text-bold"},[e._v(e._s(e.$t("Statuses")))])],1),a("q-separator",{attrs:{vertical:""}}),a("q-card-section",{staticClass:"full-width row items-center no-wrap justify-evenly"},[a("div",{staticClass:"column items-center"},[a("div",{staticClass:"text-bold"},[e._v(e._s(e.$t("OC-Admin Container")))]),!0===e.ocAdminState?a("q-icon",{attrs:{name:"extension",size:"xl",color:"positive"}}):!1===e.ocAdminState?a("q-icon",{attrs:{name:"extension_off",size:"xl",color:"warning"}}):a("q-icon",{attrs:{name:"extension",size:"xl",color:"grey"}}),!0===e.ocAdminState?a("div",[e._v(e._s(e.$t("Reachable")))]):!1===e.ocAdminState?a("div",[e._v(e._s(e.$t("Unreachable")))]):a("div",[e._v(e._s(e.$t("Unknown")))])],1),a("div",{staticClass:"column items-center"},[a("div",{staticClass:"text-bold"},[e._v(e._s(e.$t("OC-DB Container")))]),!0===e.pgSqlState?a("q-icon",{attrs:{name:"extension",size:"xl",color:"positive"}}):!1===e.pgSqlState?a("q-icon",{attrs:{name:"extension_off",size:"xl",color:"warning"}}):a("q-icon",{attrs:{name:"extension",size:"xl",color:"grey"}}),!0===e.pgSqlState?a("div",[e._v(e._s(e.$t("Reachable")))]):!1===e.pgSqlState?a("div",[e._v(e._s(e.$t("Unreachable")))]):a("div",[e._v(e._s(e.$t("Unknown")))])],1),a("div",{staticClass:"column items-center"},[a("div",{staticClass:"text-bold"},[e._v(e._s(e.$t("Platform Manager")))]),!0===e.msSqlState?a("q-icon",{attrs:{name:"cloud",size:"xl",color:"positive"}}):!1===e.msSqlState?a("q-icon",{attrs:{name:"cloud_off",size:"xl",color:"warning"}}):a("q-icon",{attrs:{name:"cloud",size:"xl",color:"grey"}}),!0===e.msSqlState?a("div",[e._v(e._s(e.$t("Reachable")))]):!1===e.msSqlState?a("div",[e._v(e._s(e.$t("Unreachable")))]):a("div",[e._v(e._s(e.$t("Unknown")))])],1)])],1)],1)],1)],1)],1)},i=[],n=a("2f62"),l=a("9fa1"),r=a("a87d"),c=a("d089"),o={name:"PageLogin",mixins:[l["a"],r["a"]],data(){return{username:"",password:"",waitingOnServer:!1,lastAttemptFailed:!1,shakyClass:!1,lastAttemptFailedTimer:null,shakyClassTime:null,ocAdminState:null,loadingPersistenceLayerAvailability:!0,delayUntilCheck:0,persistenceLayerAvailabilityCheckTimer:null}},computed:{...Object(n["d"])("mainStore",["jwtToken","currentPersistenceLayerAvailability"]),languageList(){return c["a"]&&Array.isArray(c["a"])?c["a"].reduce(((e,t)=>(e.push({...t,selected:!(String(t.value).toLowerCase()!==String(this.$i18n.locale).toLowerCase())}),e)),[]):[{value:"en-gb",nativeLabel:"English"}]},pgSqlState(){return this.currentPersistenceLayerAvailability.pgSqlAvailable},msSqlState(){return this.currentPersistenceLayerAvailability.msSqlAvailable},statusWarnings(){return Number(null===this.ocAdminState)+Number(null===this.pgSqlState)+Number(null===this.msSqlState)},statusProblems(){return Number(!1===this.ocAdminState)+Number(!1===this.pgSqlState)+Number(!1===this.msSqlState)},canWeLogin(){return!0===this.pgSqlState||null===this.pgSqlState&&!0===this.msSqlState}},methods:{...Object(n["b"])("mainStore",["signIn","signOut","reloadEzMarketNotifications","getPersistenceLayerAvailability"]),checkCredentials(){this.lastAttemptFailedTimer&&clearTimeout(this.lastAttemptFailedTimer),this.shakyClassTime&&clearTimeout(this.shakyClassTime),this.shakyClass=!1,this.lastAttemptFailed=!1,this.signIn({loadingVariableName:"waitingOnServer",caller:this,apiCallParams:{username:this.username,password:this.password},onSuccessCallBack:this.checkTokenAndMoveOn,onErrorCallBack:this.checkTokenAndMoveOn,debug:!1})},checkTokenAndMoveOn(){this.jwtToken&&this.jwtToken.length?(this.connectSocket(),this.reloadEzMarketNotifications(),this.$router.push("/Welcome")):(this.lastAttemptFailed=!0,this.shakyClass=!0,this.shakyClassTimer=setTimeout((()=>{this.shakyClass=!1}),1e3),this.lastAttemptFailedTimer=setTimeout((()=>{this.lastAttemptFailed=!1}),4800))},selectLanguage(e){Object(c["b"])(this,e)},checkPersistenceLayerAvailability(){this.getPersistenceLayerAvailability({onSuccessCallBack:this.onPersistenceLayerAvailabilitySuccess,onErrorCallBack:this.onPersistenceLayerAvailabilityError})},onPersistenceLayerAvailabilitySuccess(){this.ocAdminState=!0,this.loadingPersistenceLayerAvailability=!1,this.scheduleNewCheck()},onPersistenceLayerAvailabilityError(){this.ocAdminState=!1,this.loadingPersistenceLayerAvailability=!1,this.scheduleNewCheck()},scheduleNewCheck(){(this.statusWarnings||this.statusProblems)&&(this.delayUntilCheck=1,this.persistenceLayerAvailabilityCheckTimer||(this.persistenceLayerAvailabilityCheckTimer=setInterval((()=>{this.delayUntilCheck=this.delayUntilCheck-.05,this.delayUntilCheck<=0&&(clearInterval(this.persistenceLayerAvailabilityCheckTimer),this.persistenceLayerAvailabilityCheckTimer=null,this.checkPersistenceLayerAvailability())}),500)))}},mounted(){this.signOut(),this.checkPersistenceLayerAvailability()},beforeDestroy(){this.persistenceLayerAvailabilityCheckTimer&&clearInterval(this.persistenceLayerAvailabilityCheckTimer)}},d=o,u=(a("825d"),a("2877")),m=a("9989"),h=a("f09f"),y=a("a370"),v=a("27f9"),p=a("4b7e"),b=a("9564"),k=a("05c0"),g=a("9c40"),S=a("4e73"),q=a("1c1c"),C=a("66e5"),_=a("4074"),f=a("de5e"),A=a("c294"),w=a("58a8"),x=a("6b1d"),L=a("0016"),P=a("eb85"),T=a("eebe"),$=a.n(T),O=Object(u["a"])(d,s,i,!1,null,null,null);t["default"]=O.exports;$()(O,"components",{QPage:m["a"],QCard:h["a"],QCardSection:y["a"],QInput:v["a"],QCardActions:p["a"],QToggle:b["a"],QTooltip:k["a"],QBtn:g["a"],QMenu:S["a"],QList:q["a"],QItem:C["a"],QItemSection:_["a"],QPageSticky:f["a"],QFab:A["a"],QBadge:w["a"],QLinearProgress:x["a"],QIcon:L["a"],QSeparator:P["a"]})}}]);