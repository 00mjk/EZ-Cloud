(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{a87d:function(t,e,n){"use strict";e["a"]={computed:{darkMode:{get(){return this.$q.dark.isActive},set(t){this.$q.dark.set(t),localStorage.setItem("settings.darkMode",t)}}}}},c243:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"q-gutter-sm q-pa-xl"},[n("q-header",{class:t.darkMode?"":"bg-grey-1",style:t.darkMode?"background: var(--q-color-dark);":"",attrs:{elevated:""}},[n("q-toolbar",{staticClass:"q-gutter-x-sm",class:t.darkMode?"":"text-black"},[n("q-btn",{attrs:{"no-caps":"",flat:"",dense:"",icon:"arrow_back",label:"Return to Admin",to:"/Admin"}}),n("q-toolbar-title",{staticClass:"text-center",staticStyle:{opacity:".4"}},[t._v("Admin : RBAC : Manage User Accounts")])],1)],1),n("q-card",{staticClass:"q-pa-md q-mx-none"},[n("q-card-section",{attrs:{horizontal:""}},[n("q-card-section",{staticClass:"col q-ma-none q-pa-none"},[n("q-card-section",{staticClass:"text-h4"},[t._v("\n              User Accounts\n          ")]),n("q-card-section",[n("q-table",{attrs:{data:t.tableData,columns:t.columns,"row-key":"userId",dense:"","no-data-label":"No Account to display.",filter:t.searchFilter,loading:t.dataLoading,"rows-per-page-label":"Accounts per page:",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[n("div",{staticClass:"full-width row wrap justify-between"},[n("div",{staticClass:"q-table__title"},[t._v("\n                    Accounts\n                  ")]),n("div",{staticClass:"row q-gutter-md"},[n("div",{staticClass:"col"},[n("q-btn",{staticStyle:{"min-width":"14rem"},attrs:{rounded:"",dense:"",color:"primary",icon:"add",label:"Add New Account"},on:{click:function(e){return t.addNewAccount()}}},[n("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[t._v("\n                          Create a new Account.\n                        ")])],1)],1)]),n("div",{staticClass:"row q-gutter-md"},[n("div",{staticStyle:{width:"300px"}},[n("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[t.searchFilter.length?n("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:function(e){t.searchFilter=""}}}):t._e(),n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.searchFilter,callback:function(e){t.searchFilter=e},expression:"searchFilter"}})],1),n("q-btn",{attrs:{dense:"",outline:"",icon:"refresh",loading:t.dataLoading},on:{click:function(e){return t.loadAccountsAndRoles()}}},[n("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[t._v("\n                        Reload the list of Accounts.\n                      ")])],1)],1)])]},proxy:!0},{key:"body-cell-actions",fn:function(e){return[n("q-td",{attrs:{props:e}},[n("q-btn",{attrs:{flat:"",dense:"",icon:"edit"},on:{click:function(n){return t.doPromptForAccountDetails(e.row)}}},[n("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[t._v("\n                      "+t._s(t.$t("Edit Account details"))+"\n                    ")])],1),n("q-btn",{attrs:{flat:"",dense:"",icon:"delete",color:"negative"},on:{click:function(n){return t.deleteAccountPrompt(e.row)}}},[n("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[t._v("\n                      "+t._s(t.$t("Delete Account"))+"\n                    ")])],1)],1)]}},{key:"body-cell-roleIsPrivileged",fn:function(e){return[n("q-td",{attrs:{props:e}},[1===e.value?n("q-icon",{attrs:{name:"check_circle_outline",color:"green",size:"md"}}):t._e(),n("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[1===e.value?n("span",[t._v("Privileged user")]):0===e.value?n("span",[t._v("Non-privileged user")]):n("span",[t._v(t._s(e.value))])])],1)]}}])})],1)],1),n("q-separator",{attrs:{vertical:""}}),n("q-card-actions",{staticClass:"justify-around q-px-md",attrs:{vertical:""}},[n("q-btn",{attrs:{icon:"add",color:"primary"},on:{click:function(e){return t.addNewAccount()}}},[n("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[t._v("\n                Add Account\n              ")])],1),n("q-btn",{attrs:{icon:"refresh",loading:t.dataLoading},on:{click:function(e){return t.loadAccountsAndRoles()}}},[n("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[t._v("\n                Reload\n              ")])],1)],1)],1)],1),n("q-dialog",{attrs:{persistent:""},model:{value:t.promptForAccountDetails,callback:function(e){t.promptForAccountDetails=e},expression:"promptForAccountDetails"}},[n("q-card",{staticStyle:{"min-width":"350px"}},[n("q-card-section",[null!=t.editingAccountId?n("div",{staticClass:"text-h6"},[t._v(t._s(t.$t("User Account Details")))]):n("div",{staticClass:"text-h6"},[t._v(t._s(t.$t("New User Account")))])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{attrs:{dense:"",label:"Username",autofocus:"",disable:null!=t.editingAccountId,rules:[function(e){return!!e||t.$t("Account Username cannot be empty")}]},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.promptForAccountDetails=!1}},model:{value:t.editingAccountUsername,callback:function(e){t.editingAccountUsername=e},expression:"editingAccountUsername"}})],1),n("q-card-section",{staticClass:"q-pt-none q-mb-md"},[n("q-input",{attrs:{dense:"",label:"Password",type:t.showPassword?"text":"password",disable:null!=t.editingAccountId},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.promptForAccountDetails=!1}},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.showPassword?"visibility":"visibility_off"},on:{click:function(e){t.showPassword=!t.showPassword}}},[n("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[t.showPassword?n("span",[t._v("Hide")]):n("span",[t._v("Show")]),t._v(" Secret\n              ")])],1)]},proxy:!0}]),model:{value:t.editingAccountPassword,callback:function(e){t.editingAccountPassword=e},expression:"editingAccountPassword"}})],1),n("q-card-section",{staticClass:"q-pt-none q-mb-md"},[n("q-select",{attrs:{dense:"",options:t.rolesOptions,label:"Role","emit-value":"","map-options":""},model:{value:t.editingAccountRoleUid,callback:function(e){t.editingAccountRoleUid=e},expression:"editingAccountRoleUid"}})],1),n("q-separator"),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("Cancel")},on:{click:function(e){return t.cleanEditingVariables()}}}),null!=t.editingAccountId?n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("Update User Account"),disabled:!t.editingAccountRoleUid||!t.editingAccountRoleUid.length},on:{click:function(e){return t.addNewOrUpdateUserAccount()}}}):n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("Add new User Account"),disabled:!t.editingAccountUsername||!t.editingAccountUsername.length||!t.editingAccountPassword||!t.editingAccountPassword.length||!t.editingAccountRoleUid||!t.editingAccountRoleUid.length},on:{click:function(e){return t.addNewOrUpdateUserAccount()}}})],1)],1)],1)],1)},s=[],a=(n("4e82"),n("2f62")),i=n("a87d"),c={name:"PageAdminUsers",mixins:[i["a"]],data(){return{searchFilter:"",columns:[{name:"actions",align:"center",label:"Actions",field:"actions",sortable:!1},{name:"userLogin",align:"center",label:"Username",field:"userLogin",sortable:!0},{name:"roleName",align:"center",label:"Role",field:"roleName",sortable:!0},{name:"roleIsPrivileged",align:"center",label:"Is Privileged",field:"roleIsPrivileged",sortable:!0}],pagination:{sortBy:"userLogin",descending:!1,rowsPerPage:20},accountsLoading:!1,rolesLoading:!1,promptForAccountDetails:!1,editingAccountId:null,editingAccountUsername:null,editingAccountPassword:null,editingAccountRoleUid:null,showPassword:!1}},computed:{...Object(a["d"])("mainStore",["userAccounts","userRoles"]),tableData(){return this.userAccounts},dataLoading(){return this.accountsLoading||this.rolesLoading},rolesOptions(){const t=[];return this.userRoles.forEach((e=>{t.push({value:e.roleUid,label:e.roleName+(1===e.roleIsPrivileged?" (Privileged)":""),isPrivileged:1===e.roleIsPrivileged})})),t.sort(((t,e)=>{const n=String(t.roleName).toLowerCase(),o=String(e.roleName).toLowerCase();return n<o?-1:n>o?1:0}))}},methods:{...Object(a["b"])("mainStore",["getUserAccounts","getUserRoles","updateUserAccount","deleteUserAccount"]),loadAccounts(){this.getUserAccounts({loadingVariableName:"accountsLoading",caller:this})},loadRoles(){this.getUserRoles({loadingVariableName:"rolesLoading",caller:this})},loadAccountsAndRoles(){this.loadAccounts(),this.loadRoles()},cleanEditingVariables(){this.editingAccountId=null,this.editingAccountUsername="",this.editingAccountPassword="",this.editingAccountRoleUid=null},addNewAccount(){this.cleanEditingVariables(),this.showPassword=!1,this.promptForAccountDetails=!0},doPromptForAccountDetails(t){this.editingAccountId=t&&t.userId?t.userId:null,this.editingAccountUsername=t&&t.userLogin?t.userLogin:"",this.editingAccountPassword="placeholder.......",this.editingAccountRoleUid=t&&t.roleUid?t.roleUid:null,this.showPassword=!1,this.promptForAccountDetails=!0},addNewOrUpdateUserAccount(){this.updateUserAccount({userId:this.editingAccountId,userLogin:this.editingAccountUsername,userPassword:this.editingAccountPassword,roleUid:this.editingAccountRoleUid,loadingVariableName:"accountsLoading",caller:this,onSuccessCallBack:this.loadAccounts,onErrorCallBack:this.addNewOrUpdateUserAccountFailure}),this.cleanEditingVariables()},addNewOrUpdateUserAccountFailure(t){this.$root.$emit("addAndShowErrorToErrorPanel",t),this.loadAccounts()},deleteAccountPrompt(t){this.$q.dialog({title:"Confirm",message:"Do you REALLY want to delete this User Account?",ok:{push:!0,color:"negative"},cancel:{push:!0,color:"positive"},persistent:!0}).onOk((()=>{this.deleteAccount(t?t.userId:null)}))},deleteAccount(t){null!=t&&this.deleteUserAccount({userId:t,loadingVariableName:"accountsLoading",caller:this,onSuccessCallBack:this.loadAccounts,onErrorCallBack:this.loadAccounts})}},mounted(){this.userAccounts&&0===this.userAccounts.length&&this.loadAccounts(),this.userRoles&&0===this.userRoles.length&&this.loadRoles()}},r=c,l=n("2877"),d=n("9989"),u=n("e359"),p=n("b498"),g=n("65c6"),A=n("9c40"),m=n("6ac5"),h=n("f09f"),b=n("a370"),f=n("eaac"),w=n("05c0"),q=n("27f9"),v=n("0016"),U=n("eb85"),k=n("db86"),y=n("4b7e"),P=n("24e8"),_=n("ddd8"),C=n("7f67"),R=n("eebe"),x=n.n(R),N=Object(l["a"])(r,o,s,!1,null,null,null);e["default"]=N.exports;x()(N,"components",{QPage:d["a"],QHeader:u["a"],QColor:p["a"],QToolbar:g["a"],QBtn:A["a"],QToolbarTitle:m["a"],QCard:h["a"],QCardSection:b["a"],QTable:f["a"],QTooltip:w["a"],QInput:q["a"],QIcon:v["a"],QSeparator:U["a"],QTd:k["a"],QCardActions:y["a"],QDialog:P["a"],QSelect:_["a"]}),x()(N,"directives",{ClosePopup:C["a"]})}}]);