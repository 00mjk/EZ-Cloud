(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{c396:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"q-pa-sm"},[e("q-header",{class:t.darkMode?"":"bg-grey-1",style:t.darkMode?"background: var(--q-color-dark);":"",attrs:{bordered:""}},[e("q-toolbar",{staticClass:"q-gutter-x-sm",class:t.darkMode?"":"text-black"},[e("img",{staticClass:"q-mr-md",attrs:{src:t.darkMode?"logrhythm_logo_darkmode_wide.svg":"logrhythm_logo_lightmode_wide.svg",alt:"LogRhythm Open Collector"}}),t.isLiveStatisticsRunning?e("q-btn",{attrs:{flat:"","no-caps":"",color:"secondary",icon:"stop",label:t.$t("Stop Live Statistics")},on:{click:function(e){return t.stopLiveStatisitics()}}}):e("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",icon:"play_circle_outline",label:t.$t("Start Live Statistics")},on:{click:function(e){return t.startLiveStatisitics()}}})],1)],1),e("BreadCrumbs",{attrs:{crumbs:t.breadCrumbs,pageTitle:t.openCollector&&t.openCollector.name&&t.openCollector.name.length?t.openCollector.name:"..."}}),e("div",{staticClass:"q-gutter-y-sm"},[e("q-card",[e("q-card-section",{attrs:{horizontal:""}},[e("q-card-section",{staticClass:"col q-ma-none q-pa-none"},[e("q-card-section",{staticClass:"q-gutter-y-sm"},[e("div",{staticClass:"text-overline text-uppercase text-bold"},[t._v("\n              "+t._s(t.$t("Basic Information"))+"\n            ")]),e("div",[e("div",{staticClass:"text-bold"},[t._v("\n                "+t._s(t.$t("Host Name"))+"\n              ")]),e("div",[t._v("\n                "+t._s(t.openCollector?t.openCollector.hostname:"...")+"\n              ")])]),e("div",[e("div",{staticClass:"text-bold"},[t._v("\n                "+t._s(t.$t("Host Version"))+"\n              ")]),e("div",[t._v("\n                "+t._s(t.$t("Linux - {osVersion}",{osVersion:t.openCollector?t.openCollector.osVersion:"..."}))+"\n              ")]),e("div",[t._v("\n                "+t._s(t.$t("Docker - {dockerVersion}",{dockerVersion:t.openCollector?t.openCollector.dockerVersion:"..."}))+"\n              ")])]),e("div",[e("div",{staticClass:"text-bold"},[t._v("\n                "+t._s(t.$t("OpenCollector Version"))+"\n              ")]),e("div",[t._v("\n                "+t._s(t.openCollector?t.openCollector.ocVersion:"...")+"\n              ")]),e("div")])])],1)],1)],1),e("q-table",{attrs:{data:t.tableData,columns:t.columns,"row-key":"uid",dense:"","no-data-label":t.$t("No Container to display."),filter:t.searchFilter,loading:t.dataLoading,"rows-per-page-label":t.$t("Containers per page:"),pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticClass:"full-width row wrap justify-between"},[e("div",{staticClass:"col row justify-start"},[e("q-slider",{staticClass:"full-width q-px-xl",attrs:{dense:"","track-size":"12px","thumb-size":"20px","marker-labels-class":"text-grey",markers:"","marker-labels":t.stageMarkerLabels,"label-always":t.liveStatisticsStage>0&&t.liveStatisticsStage<3,"label-value":t.stageLabels[t.liveStatisticsStage],min:0,max:3,readonly:""},model:{value:t.liveStatisticsStage,callback:function(e){t.liveStatisticsStage=e},expression:"liveStatisticsStage"}})],1),e("div",{staticClass:"row q-gutter-md"},[e("div",{staticStyle:{width:"300px"}},[e("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:t.$t("Search")},scopedSlots:t._u([{key:"append",fn:function(){return[t.searchFilter.length?e("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:function(e){t.searchFilter=""}}}):t._e(),e("q-icon",{attrs:{name:"o_search"}})]},proxy:!0}]),model:{value:t.searchFilter,callback:function(e){t.searchFilter=e},expression:"searchFilter"}})],1)])])]},proxy:!0},{key:"body-cell-actions",fn:function(o){return[e("q-td",{attrs:{props:o}},[e("q-btn",{attrs:{flat:"",dense:"",icon:"more_horiz"}},[e("q-menu",[e("q-list",{staticStyle:{"min-width":"100px"}},[e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",disable:!(o.row&&0!==o.row.pid)},on:{click:function(e){return t.doStartStopContainer(o.row)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"o_play_arrow"}})],1),e("q-item-section",[t._v(t._s(t.$t("Start Container")))])],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",disable:!(o.row&&0!==o.row.pid)},on:{click:function(e){return t.doStartStopContainer(o.row)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"o_stop"}})],1),e("q-item-section",[t._v(t._s(t.$t("Stop Container")))])],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",disable:!(o.row&&0!==o.row.pid)},on:{click:function(e){return t.doStartStopContainer(o.row)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"o_restart_alt"}})],1),e("q-item-section",[t._v(t._s(t.$t("Restart Container")))])],1),e("q-separator"),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",disable:!(o.row&&0!==o.row.pid)},on:{click:function(e){return t.doStartStopContainer(o.row)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"o_file_download"}})],1),e("q-item-section",[t._v(t._s(t.$t("Export Configuration to File")))])],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",disable:!(o.row&&0!==o.row.pid)},on:{click:function(e){return t.doStartStopContainer(o.row)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"o_file_upload"}})],1),e("q-item-section",[t._v(t._s(t.$t("Import Configuration from File")))])],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",disable:!(o.row&&0!==o.row.pid)},on:{click:function(e){return t.doStartStopContainer(o.row)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"o_source"}})],1),e("q-item-section",[t._v(t._s(t.$t("View Configuration")))])],1),e("q-separator"),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",disable:!(o.row&&0!==o.row.pid)},on:{click:function(e){return t.doStartStopContainer(o.row)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"o_file_download"}})],1),e("q-item-section",[t._v(t._s(t.$t("Export Logs to File")))])],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",disable:!(o.row&&0!==o.row.pid)},on:{click:function(e){return t.doStartStopContainer(o.row)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"o_text_snippet"}})],1),e("q-item-section",[t._v(t._s(t.$t("View Real Time Logs")))])],1)],1)],1)],1),e("q-btn",{attrs:{flat:"",dense:"",icon:o.row&&o.row.pids&&0!==o.row.pids.instant?"o_stop":"o_play_arrow"},on:{click:function(e){return t.doStartStopContainer(o.row)}}},[e("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[t._v("\n              "+t._s(t.$t(o.row&&o.row.pids&&0!==o.row.pids.instant?"Stop Container":"Start Container"))+"\n            ")])],1)],1)]}},{key:"body-cell-status",fn:function(o){return[e("q-td",{attrs:{props:o}},[!0===o.value?e("q-badge",{attrs:{rounded:"",color:"green",label:t.$t("Running")}}):!1===o.value?e("q-badge",{attrs:{rounded:"",color:"red",label:t.$t("Stopped")}}):e("q-badge",{attrs:{rounded:"",color:"grey",label:t.$t("Unknown")}})],1)]}}])})],1)],1)},a=[],n=(o("14d9"),o("caad"),o("a87d")),s=o("31c4"),l=o("9fa1"),r=o("f423"),c={name:"PageOpenCollectorManage",mixins:[n["a"],s["a"],l["a"]],components:{BreadCrumbs:r["a"]},data(){return{openCollectorUid:"",isLiveStatisticsRunning:!1,containersListRaw:[],searchFilter:"",columns:[{name:"actions",align:"center",label:this.$t("Actions"),field:"actions",sortable:!1},{name:"status",align:"center",label:this.$t("Status"),field:t=>t.pids.instant>0,sortable:!0},{name:"name",align:"center",label:this.$t("Name"),field:"name",sortable:!0},{name:"cpuPercent",align:"center",label:this.$t("CPU"),field:"cpuPercent",sortable:!0},{name:"memUsage",align:"center",label:this.$t("Memory Usage / Limit"),field:t=>t.memUsage.instant,sortable:!0},{name:"memoryPercent",align:"center",label:this.$t("Memory Percentage"),field:"memoryPercent",sortable:!0},{name:"netIO",align:"center",label:this.$t("Net I/O"),field:t=>t.netIO.received.instant,sortable:!0},{name:"blockIO",align:"center",label:this.$t("Block I/O"),field:t=>t.blockIO.written.instant,sortable:!0},{name:"pids",align:"center",label:this.$t("Processes"),field:t=>t.pids.instant,sortable:!0},{name:"containerId",align:"center",label:this.$t("Container ID"),field:"containerId",sortable:!0}],pagination:{sortBy:"name",descending:!1,rowsPerPage:25},containerLogs:"",alwaysScrollToBottom:!0,liveStatisticsStage:0,stageMarkerLabels:{0:"Idle",1:"Started",2:"Connected",3:"Receiving"},stageLabels:{0:"Stopped",1:"Connecting to host...",2:"Waiting for data...",3:"Receiving Real Time Data"}}},computed:{breadCrumbs(){return[{icon:"o_home",link:"/Welcome"},{title:this.$t("OpenCollectors"),link:"/OpenCollectors"},{title:this.openCollector&&this.openCollector.name&&this.openCollector.name.length?this.openCollector.name:this.openCollectorUid},{title:this.$t("Manage")}]},openCollector(){const t=this.openCollectors.find((t=>t.uid===this.openCollectorUid));return t||{uid:"",name:"",hostname:"",port:null,authenticationMethod:"",username:"",password:"",privateKey:"",osVersion:"",dockerVersion:"",ocInstalled:!1,ocVersion:"",installedShippers:[],pipelines:[]}},tableData(){const t=[];return this.containersListRaw&&Array.isArray(this.containersListRaw)&&this.containersListRaw.forEach((e=>{t.push({containerId:e.Container,name:e.Name,cpuPercent:e.CPUPerc,memUsage:{instant:e.MemUsage,past:[]},memLimit:{instant:e.MemUsage,past:[]},memoryPercent:e.MemPerc,netIO:{received:{instant:e.NetIO,past:[]},sent:{instant:e.NetIO,past:[]}},blockIO:{written:{instant:e.BlockIO,past:[]},read:{instant:e.BlockIO,past:[]}},pids:{instant:Number(e.PIDs),past:[]}})})),t}},methods:{startLiveStatisitics(){this.socket&&this.socket.connected?(this.isLiveStatisticsRunning=!0,this.initStatsTail()):(this.isLiveStatisticsRunning=!1,this.$root.$emit("addAndShowErrorToErrorPanel",{data:{errors:[{code:"NoLiveSocket",message:this.$t("Live (Socket) connection with the EZ Server has been lost or is not currently established.")},{code:"TailFailedToStart",message:this.$t("Tail could not start due to no live socket available.")}]}}))},stopLiveStatisitics(){this.isLiveStatisticsRunning=!1,this.socket&&this.socket.connected?this.killStatsTail():this.$root.$emit("addAndShowErrorToErrorPanel",{data:{errors:[{code:"NoLiveSocket",message:this.$t("Live (Socket) connection with the EZ Server has been lost or is not currently established.")},{code:"TailFailedToStart",message:this.$t("Tail could not start due to no live socket available.")}]}})},doStartStopContainer(){},initStatsTail(){this.socket&&this.socket.connected&&this.socket.emit("statsTail.init",{openCollectorUid:this.openCollectorUid})},killStatsTail(){this.socket&&this.socket.connected&&this.socket.emit("statsTail.kill",{openCollectorUid:this.openCollectorUid})},scrollToBottom(t){try{const e=this.$refs[t||"containerLogsField"].$refs.input;e.scrollTop=e.scrollHeight}catch(e){console.log("ERROR - scrollToBottom - ",e)}},handleSocketOnTailLog(t){if(t&&t.openCollectorUid&&t.openCollectorUid===this.openCollectorUid){if("STDOUT"===t.code&&t.payload){const o=String(t.payload).replace("[2J[H","")||"";if(o.includes("{"))try{this.containersListRaw=JSON.parse(`[${o.split("\n").filter((t=>String(t).includes("{"))).join(",")}]`)}catch(e){console.log("ERROR",e)}}if("STDERR"===t.code&&("string"===typeof t.payload?t.payload.split("\n").forEach((e=>{this.addLineToCommunicationLog(`${t.code} | ${e||""}`)})):console.log(t.payload)),"STAGE"===t.code)if("string"===typeof t.payload){try{this.liveStatisticsStage={Stopped:0,"Container Stats Tail Ended":0,"Container Stats Tail Started":1,"Connected to host":2,"Receiving Real Time Data":3}[t.payload]||0}catch(e){console.log("STAGE | Unknown Stage. Error:",e)}this.liveStatisticsStage>0&&(this.isLiveStatisticsRunning=!0)}else console.log(t.payload);"ERROR"===t.code&&(this.addLineToCommunicationLog(`${t.code} | ${void 0!==t.payload?t.payload:""}`),this.showNotificationWithActionToLogs(`${t.code} | ${void 0!==t.payload?t.payload:""}`)),"END"===t.code&&(this.isLiveStatisticsRunning=!1,this.addLineToCommunicationLog(`${t.code} | Closing this Tail. | ${void 0!==t.payload?t.payload:"🏁"}`),this.showNotificationWithActionToLogs(`${t.code} | Closing this Tail. (${void 0!==t.payload?t.payload:"🏁"})`,"info")),"EXIT"===t.code&&(this.isLiveStatisticsRunning=!1,this.addLineToCommunicationLog(`${t.code} | Tailjob exited. | ${void 0!==t.payload?t.payload:"🏁"}`))}},handleSocketOnTailKill(t){t.code&&("STDOUT"===t.code||"STDERR"===t.code)&&t.payload&&t.openCollectorUid&&t.openCollectorUid===this.openCollectorUid&&this.addLineToCommunicationLog(`${t.code} | ${void 0!==t.payload?t.payload:""}`),t.code&&"ERROR"===t.code&&t.payload&&t.openCollectorUid&&t.openCollectorUid===this.openCollectorUid&&(this.addLineToCommunicationLog(`${t.code} | ${void 0!==t.payload?t.payload:""}`),console.error(t.payload),this.showNotificationWithActionToLogs(`${t.code} | ${void 0!==t.payload?t.payload:""}`,"info")),"END"===t.code&&t.openCollectorUid&&t.openCollectorUid===this.openCollectorUid&&(this.addLineToCommunicationLog(`${t.code} | ${this.$t("Post-Tail killing/cleaning job finished.")} | ${void 0!==t.payload?t.payload:"🏁"}`),this.showNotificationWithActionToLogs(`${t.code} | ${this.$t("Post-Tail killing/cleaning job finished.")} (${void 0!==t.payload?t.payload:"🏁"})`,"info")),"EXIT"===t.code&&t.openCollectorUid&&t.openCollectorUid===this.openCollectorUid&&this.addLineToCommunicationLog(`${t.code} | ${this.$t("Post-Tail killing/cleaning job exited.")} | ${void 0!==t.payload?t.payload:"🏁"}`)},addLineToCommunicationLog(t){this.addLineToContainerLog(t)},addLineToContainerLog(t){if(void 0!==t){if("string"===typeof t)this.containerLogs+=t+(t.endsWith("\n")?"":"\n");else try{this.containerLogs+=`${JSON.stringify(t,null,"  ")}\n`}catch(e){}this.$nextTick(this.scrollToBottom)}},showNotificationWithActionToLogs(t,e="negative"){this.$q.notify({message:t,type:e,progress:!0,timeout:"negative"===e?1e4:2500})}},mounted(){this.$route.params.openCollectorUid&&this.$route.params.openCollectorUid.length&&(this.openCollectorUid!==this.$route.params.openCollectorUid&&(this.openCollectorUid=this.$route.params.openCollectorUid),this.updateRecentItems(),this.socket.on("statsTail.log",this.handleSocketOnTailLog),this.socket.on("statsTail.kill",this.handleSocketOnTailKill),this.openCollectorUid&&this.openCollectorUid.length&&this.socket&&!1===this.isLiveStatisticsRunning&&this.startLiveStatisitics())},destroyed(){this.killStatsTail(),this.socket&&(this.socket.off("statsTail.log"),this.socket.off("statsTail.kill"))}},d=c,p=o("2877"),m=o("9989"),h=o("e359"),u=o("b498"),g=o("65c6"),v=o("9c40"),C=o("f09f"),S=o("a370"),b=o("27f9"),f=o("eaac"),k=o("c1d0"),y=o("0016"),w=o("db86"),$=o("4e73"),T=o("1c1c"),L=o("66e5"),q=o("4074"),_=o("eb85"),U=o("05c0"),R=o("58a8"),O=o("7f67"),x=o("eebe"),I=o.n(x),N=Object(p["a"])(d,i,a,!1,null,null,null);e["default"]=N.exports;I()(N,"components",{QPage:m["a"],QHeader:h["a"],QColor:u["a"],QToolbar:g["a"],QBtn:v["a"],QCard:C["a"],QCardSection:S["a"],QInput:b["a"],QTable:f["a"],QSlider:k["a"],QIcon:y["a"],QTd:w["a"],QMenu:$["a"],QList:T["a"],QItem:L["a"],QItemSection:q["a"],QSeparator:_["a"],QTooltip:U["a"],QBadge:R["a"]}),I()(N,"directives",{ClosePopup:O["a"]})}}]);