(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"713b":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-layout",{attrs:{view:"lHh lpR fFf"}},[i("q-drawer",{staticClass:"column",attrs:{"show-if-above":"",mini:e.miniState,"mini-to-overlay":"",width:300,breakpoint:500,bordered:""},on:{mouseover:function(t){e.miniState=!1},mouseout:function(t){e.miniState=!0}},model:{value:e.drawerMenuOpen,callback:function(t){e.drawerMenuOpen=t},expression:"drawerMenuOpen"}},[i("div",{staticClass:"fit column"},[i("div",{staticClass:"col"},[i("q-scroll-area",{staticClass:"fit"},[i("q-list",{attrs:{padding:""}},e._l(e.mainLinks,(function(t){return i("EssentialLink",e._b({key:t.title},"EssentialLink",t,!1))})),1)],1)],1),i("q-list",{staticClass:"col-auto"},[e.needToConfigureMsSql?i("q-item",[i("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[e._v("\n          "+e._s(e.$t("The connection details to the SQL server on the SIEM are missing."))),i("br"),e._v("\n          "+e._s(e.$t("A lot of things will not work until this is configred."))+"\n        ")]),i("q-item-section",{attrs:{side:""}},[i("q-avatar",{staticClass:"q-pa-none",attrs:{size:"24px",square:""}},[i("q-icon",{attrs:{name:"link_off",size:"sm",color:"orange"}})],1)],1),i("q-item-section",[i("q-item-label",{staticClass:"text-orange"},[e._v(e._s(e.$t("SIEM Not Connected")))])],1)],1):e._e(),e.needToConfigureMsSql?i("q-separator",{staticClass:"q-my-xs"}):e._e(),e.socket.connected?e._e():i("q-item",[i("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[e._v("\n          "+e._s(e.$t("Live connection with server has been lost."))),i("br"),e._v("\n          "+e._s(e.$t("Some features might not work anymore."))+"\n        ")]),i("q-item-section",{attrs:{side:""}},[i("q-avatar",{staticClass:"q-pa-none",attrs:{size:"24px",square:""}},[i("q-icon",{attrs:{name:"cloud_off",size:"sm",color:"orange"}})],1)],1),i("q-item-section",[i("q-item-label",{staticClass:"text-orange"},[e._v(e._s(e.$t("Disconnected")))])],1)],1),e.socket.connected?e._e():i("q-separator",{staticClass:"q-my-xs"}),e._l(e.lowLinks,(function(t,n){return i("EssentialLink",e._b({directives:[{name:"show",rawName:"v-show",value:!t.needsPriviledge||t.needsPriviledge&&e.loggedInUserIsPrivileged,expression:"!link.needsPriviledge || (link.needsPriviledge && loggedInUserIsPrivileged)"}],key:n},"EssentialLink",t,!1))}))],2),i("div",{staticClass:"text-center"},[i("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[i("span",{staticClass:"text-bold"},[e._v(e._s(e.$t("OC Admin Client version:")))]),e._v(" v"+e._s(e.version)),i("br"),i("span",{staticClass:"text-bold"},[e._v(e._s(e.$t("OC Admin Server version:")))]),e._v(" v"+e._s(e.serverVersion)+"\n      ")]),i("span",{staticStyle:{opacity:".4","font-size":".75em"}},[e._v("v"+e._s(e.version))])],1)],1)]),i("q-page-container",[i("router-view")],1),i("q-dialog",{attrs:{persistent:""},model:{value:e.showErrorPanel,callback:function(t){e.showErrorPanel=t},expression:"showErrorPanel"}},[i("q-card",{staticStyle:{"min-width":"350px"}},[i("q-card-section",{staticClass:"q-pb-none"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("What did just go wrong?")))])]),e.errorPanelDetails&&Array.isArray(e.errorPanelDetails)?i("q-card-section",{staticClass:"q-pt-none"},[i("div",{staticClass:"text-bold text-italic"},[e._v(e._s(e.$tc("| {count} error occured. | {count} errors occured.",e.errorPanelDetails.length)))])]):e._e(),e._l(e.errorPanelDetails,(function(t,n){return i("q-card-section",{key:n},[i("div",{},[i("div",{staticClass:"row q-my-sm"},[i("q-separator",{attrs:{vertical:"",size:"2px",color:"orange"}}),i("div",{staticClass:"q-ml-sm"},[i("div",{staticClass:"text-overline"},[e._v(e._s(e.$t("Message Code:")))]),i("div",{staticClass:"q-ml-sm text-bold"},[e._v(e._s(t.code))]),i("div",{staticClass:"q-mt-sm text-overline"},[e._v(e._s(e.$t("Message:")))]),i("div",{staticClass:"q-ml-sm text-italic"},[e._v(e._s(t.message))]),i("div",{staticClass:"q-mt-sm text-overline"},[e._v(e._s(e.$t("More information available at:")))]),i("div",{staticClass:"q-ml-sm"},[i("a",{staticClass:"text-primary",attrs:{href:t.wikiLink,target:"_blank"}},[e._v(e._s(t.wikiLink))])])])],1)])])})),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary","text-color":"white",label:e.$t("Close")}})],1)],2)],1)],1)},s=[],a=(i("5319"),i("2f62")),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!==e.title?i("q-item",{attrs:{clickable:"",tag:e.subMenus&&e.subMenus.length?void 0:"a",href:e.subMenus&&e.subMenus.length?void 0:e.link}},[e.icon?i("q-item-section",{attrs:{side:""}},[i("q-avatar",{staticClass:"q-pa-none",attrs:{size:"24px",square:""}},[i("q-icon",{attrs:{name:e.icon,size:"sm",color:e.isPageActive?"primary":""}}),null!==e.notification?i("q-badge",{attrs:{floating:"",rounded:"",color:e.notificationColor,"text-color":e.notificationTextColor,label:e.notification}}):e._e()],1)],1):e._e(),i("q-item-section",[i("q-item-label",{class:e.isPageActive?"text-primary":""},[e._v(e._s(e.title))])],1),e.subMenus&&e.subMenus.length?i("q-menu",{attrs:{"auto-close":"",anchor:"center start",self:"center start"}},[i("q-list",{attrs:{padding:""}},e._l(e.subMenus,(function(t){return i("EssentialLink",e._b({key:t.title},"EssentialLink",t,!1))})),1)],1):e._e()],1):!0===e.spacer?i("q-item"):!0===e.separator?i("q-separator",{staticClass:"q-my-xs"}):e._e()},r=[],l={name:"EssentialLink",props:{title:{type:String,default:null},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""},notification:{type:[String,Number],default:null},notificationColor:{type:String,default:"orange"},notificationTextColor:{type:String,default:"white"},subMenus:{type:Array,default:null},spacer:{type:Boolean,default:!1},separator:{type:Boolean,default:!1}},computed:{isPageActive(){if(this.$route.path&&this.$route.path.length){const e=this.link.replace("#/","/");return this.$route.path.startsWith(e,0)}return!1}}},c=l,d=i("2877"),m=i("66e5"),u=i("4074"),p=i("cb32"),f=i("0016"),g=i("58a8"),h=i("0170"),v=i("4e73"),k=i("1c1c"),_=i("eb85"),q=i("eebe"),b=i.n(q),C=Object(d["a"])(c,o,r,!1,null,null,null),w=C.exports;b()(C,"components",{QItem:m["a"],QItemSection:u["a"],QAvatar:p["a"],QIcon:f["a"],QBadge:g["a"],QItemLabel:h["a"],QMenu:v["a"],QList:k["a"],QSeparator:_["a"]});var P=i("9fa1"),S=i("9224"),y=i("bd4c"),M={name:"MainLayout",components:{EssentialLink:w},mixins:[P["a"]],data(){return{drawerMenuOpen:!1,miniState:!0,version:S["b"],showErrorPanel:!1,errorPanelDetails:[]}},computed:{...Object(a["d"])("mainStore",["loggedInUser","loggedInUserIsPrivileged","errorWikiUrlBase","ezMarketNotification","deployment","extraInformation"]),serverVersion(){return this.deployment&&this.deployment.version?this.deployment.version:"?.?.?"},needToConfigureMsSql(){return this.extraInformation&&this.extraInformation.msSqlConnectionConfigMissing},mainLinks(){return[{title:"",icon:"home",link:"#/Welcome"},{title:this.$t("OpenCollectors"),icon:"mediation",link:"#/OpenCollectors"},{title:this.$t("Pipelines"),icon:"account_tree",link:"#/Pipelines"}]},lowLinks(){return[{title:this.$t("EZ Market Place"),icon:"storefront",link:"#/MarketPlace",id:"ezMarketPlace",notification:5,notificationColor:"green",notificationTextColor:"white",subMenus:[{title:this.$t("Notifications"),icon:"mail_outline",link:"#/MarketPlace/Notifications"},{title:this.$t("Pipeline Templates"),icon:"account_tree",link:"#/MarketPlace/PipelineTemplates"},{title:this.$t("My Profile"),icon:"person",link:"#/MarketPlace/PublisherProfile"}]},{separator:!0},{title:this.$t("Admin"),icon:"admin_panel_settings",link:"#/Admin",needsPriviledge:!0,id:"admin",notification:null,notificationColor:"negative",notificationTextColor:"white"},{title:this.$t("Settings"),icon:"settings",link:"#/Settings"},{separator:!0},{title:this.$t("Log Out"),icon:"logout",link:"#/Logout"}]}},methods:{sanitiseWikiLinks(e){try{return String(e).toLowerCase().replace(/[^a-zA-Z0-9_-]/g,"").replace(/ /g,"-")}catch(t){return null}},prepareAndShowErrorPanel(e){if(console.log("prepareAndShowErrorPanel",e),this.errorPanelDetails=[],e&&e.data&&e.data.errors&&Array.isArray(e.data.errors)&&e.data.errors.length)e.data.errors.forEach((e=>{const t=Date.now();this.errorPanelDetails.push({timestamp:t,timestampIso:y["a"].formatDate(t,"YYYY-MM-DDTHH:mm:ss.SSSZ"),code:(e&&null!=e.number?e.number:e.code)||"N/A",message:e&&e.message?e.message:"Unknown error. See Console.",wikiLink:e&&e.message?e&&null!=e.number?this.errorWikiUrlBase+this.sanitiseWikiLinks(e.number):this.errorWikiUrlBase+this.sanitiseWikiLinks(e.code):this.errorWikiUrlBase+"unknown-error-see-console"})}));else{const t=Date.now();this.errorPanelDetails.push({timestamp:t,timestampIso:y["a"].formatDate(t,"YYYY-MM-DDTHH:mm:ss.SSSZ"),code:e&&e.code?e.code:"N/A",message:e&&e.messageForLogAndPopup?e.messageForLogAndPopup:e&&e.captionForLogAndPopup?e.captionForLogAndPopup:"Unknown error. See Console.",wikiLink:e&&e.code?this.errorWikiUrlBase+e.code:e&&e.messageForLogAndPopup||e&&e.captionForLogAndPopup?null:this.errorWikiUrlBase+"unknown-error-see-console"})}this.showErrorPanel=!0,this.errorPanelDetails.forEach((e=>{console.log("ðŸ“œ [LOG] |",e.timestampIso,"| Code:",e.code,"| Message:",e.message,"| WikiLink:",e.wikiLink)}))},updateEzMarketNotificationNumber(e){const t=this.lowLinks.find((e=>"ezMarketPlace"===e.id));t&&(t.notification=e)},updateAdminNotificationNumber(e){const t=this.lowLinks.find((e=>"admin"===e.id));t&&(t.notification=e)}},watch:{ezMarketNotification:{handler(e){this.updateEzMarketNotificationNumber(e)},immediate:!0},extraInformation:{handler(e){this.updateAdminNotificationNumber(this.extraInformation&&!0===this.extraInformation.msSqlConnectionConfigMissing?1:null)},deep:!0,immediate:!0}},mounted(){this.$root.$on("addAndShowErrorToErrorPanel",this.prepareAndShowErrorPanel)},beforeDestroy(){this.$root.$off("addAndShowErrorToErrorPanel")}},x=M,L=i("4d5a"),A=i("9404"),$=i("4983"),E=i("05c0"),Q=i("09e3"),I=i("24e8"),D=i("f09f"),z=i("a370"),N=i("4b7e"),T=i("9c40"),O=i("7f67"),W=Object(d["a"])(x,n,s,!1,null,null,null);t["default"]=W.exports;b()(W,"components",{QLayout:L["a"],QDrawer:A["a"],QScrollArea:$["a"],QList:k["a"],QItem:m["a"],QTooltip:E["a"],QItemSection:u["a"],QAvatar:p["a"],QIcon:f["a"],QItemLabel:h["a"],QSeparator:_["a"],QPageContainer:Q["a"],QDialog:I["a"],QCard:D["a"],QCardSection:z["a"],QCardActions:N["a"],QBtn:T["a"]}),b()(W,"directives",{ClosePopup:O["a"]})}}]);